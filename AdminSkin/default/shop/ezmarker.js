var protocol=(location.protocol=="https:")?"https://":"http://";var _LT_ezm_iconImg=protocol+"mapimage.koubei.com/mapjs/img/icon/";var _LT_ezm_buttonImg=[protocol+"mapimage.koubei.com/mapjs/img/ezmarker/button-n.gif",protocol+"mapimage.koubei.com/mapjs/img/ezmarker/button-f.gif"];var _LT_ezm_imgPath=protocol+"mapimage.koubei.com/mapjs/img/ezmarker/";var _LT_ezm_helpUrl=protocol+"api.51ditu.com/docs/ezmarkerapi.html";function LTNS(){LTNS.info={time:'Fri Jun 8 11:24:36 UTC+0800 2007',version:'1',ov:'1.2 Ver 20070305'};var G=function(T){var q=0,F=0;var i=T.length;var v=new String();var t=-1;var E=0;for(var M=0;M<i;M++){var j=T.charCodeAt(M);if(j>=109){F=(F<<4)+(j-109);q+=4;}else if(j>=105){F=(F<<2)+(j-105);q+=2;}else{if(j>=92){j--;};F=(F<<6)+(j-40);q+=6;};while(q>=8){var Q=F>>(q-8);if(E>0){t=(t<<6)+(Q&(0x3f));E--;if(E==0){v+=String.fromCharCode(t);};}else{if(Q>=224){t=Q&(0xf);E=2;}else if(Q>=128){t=Q&(0x1f);E=1;}else{v+=String.fromCharCode(Q);};};F=F-(Q<<(q-8));q-=8;};};return v;};var y=["self","0","up.gif","100%",G("BN-_@?5KDNMXE+Q_C_ML2+(Q")," ","solid 1px green","input",G("bQ*Dbd:J"),"13px","blue","2px","#8BA2D7","mousemove","a","14px","6px","openhand.cur","default","1px","dblclick","max.gif","3px","solid 1px #7C8EA4","#FFFFFF","12px","px","span","5px","url(","25px","10px","mousedown","markerclick","marker-f.gif","resize","close","number","mouseup","mouseover","mouseout","center","4px","marker-n.gif","img",'relative','absolute',"div","none","","0px","hand","click",'<input name="','object'];var U=window;var l=document;function n(a){return a.style;};function x(K,a){for(var h in a){K[h]=a[h];};}function _(J,Z,v){var r=this;r.name=J;r.type=Z?Z:0;r.saveConfirmMsg=G("bQJWbA*Nb3gEbB_@c2gMb3_5bd_VddZG");r.defaultPoint=new LTPoint(10434857,3377254);r.imgPath=U._LT_ezm_imgPath;r._showPlaceList=true;r._showSearch=((typeof(LTLocalSearch)==y[54]||typeof(LTLocalSearch)=='function')?true:false);l.write(y[53]+r.name+'.x" id="'+J+'_x" style="display:none;"/>');r.inputX=l.getElementById(r.name+"_x");l.write(y[53]+r.name+'.y" id="'+J+'_y" style="display:none;"/>');r.inputY=l.getElementById(r.name+"_y");l.write(y[53]+r.name+'.z" id="'+J+'_z" style="display:none;"/>');r.inputZ=l.getElementById(r.name+"_z");if(r.type==0){l.write('<img id="'+r.name+'_button"/>');r.button=l.getElementById(r.name+"_button");r.setButtonImage(U._LT_ezm_buttonImg);LTEvent.bind(r.button,y[52],r,r.showMap);LTFunction.setCursorStyle(r.button,y[51]);}else if(r.type==1){if(!v){l.write('<div id="'+J+'_div"/>');v=l.getElementById(r.name+"_div");n(v).left=y[50];n(v).top=y[50];};r.container=v;r.showMap();};};x(_.prototype,{showButton:function(R){var r=this;n(r.button).display=R?y[49]:y[48];},showMap:function(){var r=this;switch(r.type){case 0:if(!r.win){r.container=l.createElement(y[47]);n(r.container).position=y[46];n(r.container).zIndex=99999;l.body.insertBefore(r.container,l.body.firstChild);r.createWin({canResize:1,canClose:1,drawZoom:0.7,minSize:[450,360]});}else{n(r.container).display=y[49];r.win.setContainerZoom();};break;case 1:n(r.container).position=y[45];n(r.container).zIndex=1;var H=LTMaps.prototype.getContainerSize.apply(r);r.createWin({canResize:0,canClose:0,drawSize:H,minSize:[450,360]});break;};},createWin:function(b){var r=this;r.win=new m(r.container,b);r.win.setTitle(G("4:dQH0ONJcOLW@`OWBaH3;aH4JdNP0GNTcKLW@`OWBaH3;aH4ZdLWb`MSAKLW@`OWB{"));r.markerButton=r.win.doc.createElement(y[44]);r.markerButton.src=r.imgPath+y[43];var f=n(r.markerButton);f.position=y[45];f.width="176px";f.height="36px";f.top=y[42];LTFunction.setCursorStyle(r.markerButton,y[51]);r.win.bottomDiv.align=y[41];r.win.bottomDiv.appendChild(r.markerButton);r.win.createLTLink(r.imgPath+"help.gif",U._LT_ezm_helpUrl);LTEvent.bind(r.markerButton,y[52],r,r.markerPoint);LTEvent.bind(r.markerButton,y[40],r,r.setMarkButtonNormal);LTEvent.bind(r.markerButton,y[39],r,r.setMarkButtonFocus);r.map=new LTMaps(r.win.mapsDiv);r.map.handleMouseScroll();r.map.mapControl=new LTStandMapControl(r.win.size[1]>400);r.map.addControl(r.map.mapControl);r.markControl=new LTMarkControl(new LTIcon(r.imgPath+"tack.gif",[78,39]));r.markControl.setVisible(false);LTEvent.bind(r.markControl,y[38],r,r.setMarkPoint);r.map.addControl(r.markControl);var Q,p;if(r.point){Q=r.point;};if(typeof(r.zoom)==y[37]){p=r.zoom;};if(!Q&&r.defaultPoint){Q=r.defaultPoint;};if(typeof(p)!=y[37]&&typeof(r.defaultZoom)==y[37]){p=r.defaultZoom;};if(Q&&typeof(p)==y[37]){Q=(typeof(Q)!=y[54]&&LTPlaceList)?LTPlaceList.getDefault().getPoint(Q):Q;r.map.centerAndZoom(Q,p);}else if(!r.map.loaded){r.map.centerAndZoom(r.defaultPoint,13);};r.closeListener=LTEvent.bind(r.win,y[36],r,r.onWinClose);LTEvent.bind(r.win,y[35],r,r.resetMapSize);if(r.point){r.setMarker(r.point);};r.setPlaceList(r._showPlaceList);r.setSearch(r._showSearch,r._searchCity);},setMarkButtonNormal:function(){var r=this;r.markerButton.src=r.imgPath+y[43];},setMarkButtonFocus:function(){var r=this;r.markerButton.src=r.imgPath+y[34];},markerPoint:function(){var r=this;if(r.marking){r.marking=false;r.markerButton.src=r.imgPath+y[43];r.markControl.depose();}else{r.marking=true;r.markerButton.src=r.imgPath+y[34];r.markControl.btnClick();if(r.markControl.flag==true){r.markerPoint();};};},setMarkPoint:function(v){var r=this;if(U.confirm(r.saveConfirmMsg)){r.point=v;r.zoom=r.map.getCurrentZoom();r.inputX.value=v.getLongitude();r.inputY.value=v.getLatitude();r.inputZ.value=r.zoom;r.close();r.setMarkButtonNormal();LTEvent.trigger(r,"mark",[r.point,r.zoom]);r.marking=false;}else{r.markerPoint();};},resetMapSize:function(u){var r=this;if(!r.map){return;};r.map.resizeMapDiv();if(r.map.mapControl.showZoom&&u[1]<400){r.map.removeControl(r.map.mapControl);r.map.mapControl=new LTStandMapControl(false);r.map.addControl(r.map.mapControl);};if(!r.map.mapControl.showZoom&&u[1]>400){r.map.removeControl(r.map.mapControl);r.map.mapControl=new LTStandMapControl(true);r.map.addControl(r.map.mapControl);};},setDefaultView:function(c,Z){var r=this;c=(typeof(c)!=y[54]&&LTPlaceList)?LTPlaceList.getDefault().getPoint(c):c;r.defaultPoint=c;r.defaultZoom=Z;if(r.map){r.map.centerAndZoom(c,Z);};},setValue:function(V,v){var r=this;V=(typeof(V)!=y[54]&&LTPlaceList)?LTPlaceList.getDefault().getPoint(V):V;r.point=V;r.zoom=v;r.inputX.value=V.getLongitude();r.inputY.value=V.getLatitude();r.inputZ.value=v;if(r.map){r.map.centerAndZoom(V,v);r.setMarker(r.point);};},setButtonImage:function(Q){var r=this;if(!(r.type==0)){return;};r.buttonNImage=Q[0]?Q[0]:Q;r.buttonFImage=Q[1]?Q[1]:null;if(r.buttonFImage&&!r.bmoverl){r.bmoverl=LTEvent.bind(r.button,y[39],r,r.buttonFocus);r.bmoutl=LTEvent.bind(r.button,y[40],r,r.buttonNormal);};if(!r.buttonFImage&&r.bmoverl){LTEvent.removeListener(r.bmoverl);LTEvent.removeListener(r.bmoutl);};r.button.src=r.buttonNImage;},buttonFocus:function(){var r=this;if(!(r.type==0)){return;};r.button.src=r.buttonFImage;},buttonNormal:function(){var r=this;if(!(r.type==0)){return;};r.button.src=r.buttonNImage;},setWinZIndex:function(T){var r=this;r.winZIndex=T;if(r.container){n(r.container).zIndex=r.winZIndex;};},clearMarker:function(O){var r=this;if(r.marker){r.map.removeOverLay(r.marker);r.marker=null;};},setMarker:function(M){var r=this;r.clearMarker();var t=new LTIcon(r.imgPath+"tack-g.gif",[78,39]);r.marker=new LTMarker(M,t);r.map.addOverLay(r.marker);},onWinClose:function(){var r=this;if(r.type!=0){return;};{r.clearMarker();};},open:function(W,o){var r=this;if(r.show){r.close();};if(!r.init){r.initialize();}else{n(r.container).display=y[49];r.setContainerZoom();};if(W&&typeof(o)==y[37]){if(typeof(W)==y[54]){r.map.centerAndZoom(W,o);}else if(typeof(W)=="string"){r.map.cityNameAndZoom(W,o);};}else if(!r.map.loaded){r.map.centerAndZoom(r.defaultPoint,12);};r.show=true;},setPlaceList:function(K){var r=this;r._showPlaceList=K;if(!r.map){return;};if(K&&!r.placeList){r.placeList=new w();r.map.addControl(r.placeList);};if(!K&&r.placeList){r.map.removeControl(r.placeList);r.placeList=null;};},setSearch:function(Q,b){var r=this;r._showSearch=Q;r._searchCity=b;if(!r.map){return;};if(Q){if(!r.search){r.search=new P(r._searchCity);LTEvent.bind(r.search,y[33],r,r.onSearchMarkerClick);r.map.addControl(r.search);}else if(b){r.search.setCity(b);};};if(!Q&&r.search){r.map.removeControl(r.search);r.search=null;};},maxSize:function(){var r=this;if(r.win){r.win.maxSize();};},onSearchMarkerClick:function(L){var r=this;if(!r.marking){r.map.zoomTo(0);r.map.moveToCenter(L.point);};},close:function(){var r=this;if(r.type==1){return;};if(r.marking){r.markerPoint();};r.markControl.depose();r.win.close();LTEvent.trigger(r,y[36],[]);}});function m(O,R){var r=this;r.drawZoom=R.drawZoom?R.drawZoom:0.7;r.container=O;r.config=R?R:{};r.doc=r.container.ownerDocument?r.container.ownerDocument:l;r.tpbNum=0;r.imgPath=U._LT_ezm_imgPath;LTFunction.setUnSelectable(r.container);r.container.onselectstart=LTFunction.falseFunction;LTEvent.addListener(r.container,y[32],LTEvent.cancelBubble);var N=r.doc.createElement(y[44]);N.src=r.imgPath+"leftTop.gif";var t=n(N);t.position=y[46];t.left=y[50];t.top=y[50];t.width=y[31];t.height=y[30];r.container.appendChild(N);var N=r.doc.createElement(y[44]);N.src=r.imgPath+"rightTop.gif";var t=n(N);t.position=y[46];t.right=y[50];t.top=y[50];t.width=y[31];t.height=y[30];r.container.appendChild(N);r.topDiv=r.doc.createElement(y[47]);var t=n(r.topDiv);t.backgroundImage=y[29]+r.imgPath+"top.gif)";t.position=y[46];t.left=y[31];t.top=y[50];t.height=y[30];r.container.appendChild(r.topDiv);var N=r.doc.createElement(y[44]);N.src=r.imgPath+"ezmarker.gif";var t=n(N);t.position=y[46];t.left=y[50];t.top=y[28];t.width="60px";t.height="17px";r.topDiv.appendChild(N);var i=l.createElement(y[27]);var t=n(i);t.position=y[46];t.left=(parseInt(n(N).left)+parseInt(n(N).width)+10)+y[26];t.top="8px";t.fontSize=y[25];t.color="#D31205";i.innerHTML=G("E`E`3K<YA.M]E:bKC_z");r.topDiv.appendChild(i);r.titleDiv=i;r.contentDiv=r.doc.createElement(y[47]);var t=n(r.contentDiv);t.position=y[46];t.left=y[50];t.top=y[30];t.backgroundColor=y[24];t.border=y[23];r.container.appendChild(r.contentDiv);r.bottomDiv=r.doc.createElement(y[47]);var t=n(r.bottomDiv);t.backgroundImage=y[29]+r.imgPath+"bottom.gif)";t.position=y[46];t.left=y[50];t.bottom=y[50];t.height="40px";r.contentDiv.appendChild(r.bottomDiv);r.mapsDiv=r.doc.createElement(y[47]);var t=n(r.mapsDiv);t.position=y[46];t.left=y[22];t.top=y[22];t.border=y[23];t.zIndex=100;r.contentDiv.appendChild(r.mapsDiv);if(r.config.canClose){var u=r.createLTButton(r.imgPath+"close.gif");LTEvent.bind(u,y[52],r,r.close);};if(r.config.canResize){r.maxButton=r.createLTButton(r.imgPath+y[21]);LTEvent.bind(r.maxButton,y[52],r,r.maxSize);LTEvent.bind(r.topDiv,y[20],r,r.maxSize);var J=l.createElement(y[44]);var t=n(J);t.position=y[46];t.right=y[19];t.bottom=y[19];t.width=y[25];t.height=y[25];LTFunction.setCursorStyle(J,"NW-resize");J.src=r.imgPath+"resize.gif";LTEvent.bind(J,y[32],r,r.onResizeMouseDown);r.bottomDiv.appendChild(J);LTEvent.bind(r.topDiv,y[32],r,r.onTitleMouseDown);LTFunction.setCursorStyle(r.topDiv,y[18],y[17]);};r.size=r.config.size;if(!r.size&&r.config.drawZoom){r.setContainerZoom(r.drawZoom);};if(!r.size)r.size=LTMaps.prototype.getContainerSize.apply(r);r.checkSize();r.setContainerSize(r.size);r.init=true;r.resizeListener=LTEvent.bind(U,y[35],r,r.onWindowResize);};x(m.prototype,{setContainerSize:function(C,H){var r=this;r.size=C;r.checkSize();var W=n(r.container);W.width=r.size[0]+y[26];W.height=r.size[1]+y[26];n(r.topDiv).width=(r.size[0]-20)+y[26];n(r.mapsDiv).height=(r.size[1]-65)+y[26];n(r.contentDiv).height=(r.size[1]-25)+y[26];if(LTBrowserInfo.isIE()){n(r.bottomDiv).width=(r.size[0]-2)+y[26];n(r.contentDiv).width=(r.size[0])+y[26];n(r.mapsDiv).width=(r.size[0]-8)+y[26];}else{n(r.bottomDiv).width=(r.size[0]-4)+y[26];n(r.contentDiv).width=(r.size[0]-3)+y[26];n(r.mapsDiv).width=(r.size[0]-11)+y[26];};if(!H){LTEvent.trigger(r,y[35],[r.size]);};},createLTButton:function(Z){var r=this;var z=r.doc.createElement(y[44]);z.src=Z;var e=n(z);e.position=y[46];e.right=(r.tpbNum++)*20+y[26];e.top=y[16];e.width=y[15];e.height=y[15];LTFunction.setCursorStyle(z,y[51]);r.topDiv.appendChild(z);return z;},createLTLink:function(N,A){var r=this;var R=r.doc.createElement(y[14]);R.target="_blank";R.href=A;var T=r.doc.createElement(y[44]);T.src=N;var O=n(T);O.position=y[46];O.border=y[50];O.right=(r.tpbNum++)*20+y[26];O.top=y[16];O.width=y[15];O.height=y[15];R.appendChild(T);r.topDiv.appendChild(R);},close:function(){var r=this;LTEvent.trigger(r,y[36],[]);n(r.container).display=y[48];},maxSize:function(){var r=this;if(r.drawZoom==1){r.setContainerZoom(0.7);r.maxButton.src=r.imgPath+y[21];}else{r.setContainerZoom(1);r.maxButton.src=r.imgPath+"max-f.gif";};},onWindowResize:function(){var r=this;if(r.config.canResize){n(r.container).zIndex=99999;r.setContainerZoom(r.drawZoom);};},setContainerZoom:function(p){var r=this;r.drawZoom=p?p:0.7;if(l.lastChild.clientWidth==0&&l.lastChild.clientHeight==0){r.size=[l.body.clientWidth*r.drawZoom,l.body.clientHeight*r.drawZoom];r.checkSize();n(r.container).width=r.size[0]+y[26];n(r.container).height=r.size[1]+y[26];r.setContainerSize(r.size);n(r.container).left=((l.body.clientWidth-r.size[0])/2+l.body.scrollLeft)+y[26];n(r.container).top=((l.body.clientHeight-r.size[1])/2+l.body.scrollTop)+y[26];}else{r.size=[l.lastChild.clientWidth*r.drawZoom,l.lastChild.clientHeight*r.drawZoom];r.checkSize();n(r.container).width=r.size[0]+y[26];n(r.container).height=r.size[1]+y[26];r.setContainerSize(r.size);n(r.container).left=((l.lastChild.clientWidth-r.size[0])/2+l.lastChild.scrollLeft)+y[26];n(r.container).top=((l.lastChild.clientHeight-r.size[1])/2+l.lastChild.scrollTop)+y[26];};},setTitle:function(a){var r=this;r.titleDiv.innerHTML=a;},checkSize:function(N){var r=this;if(!r.config.minSize){return;};if(r.size[0]<r.config.minSize[0]){r.size[0]=r.config.minSize[0];};if(r.size[1]<r.config.minSize[1]){r.size[1]=r.config.minSize[1];};},onTitleMouseDown:function(T){var r=this;LTEvent.cancelBubble(T);r.tmml=LTEvent.bind(l,y[13],r,r.onTitleMouseMove);r.tmul=LTEvent.bind(l,y[38],r,r.onTitleMouseUp);r.draggingPoint=[parseInt(n(r.container).left)-T.clientX,parseInt(n(r.container).top)-T.clientY];LTFunction.setCursorStyle(r.topDiv,"move","closedhand.cur");r.enableDrag=true;r.isDragging=true;},onTitleMouseMove:function(a){var r=this;LTEvent.cancelBubble(a);if(r.enableDrag&&r.isDragging){r.enableDrag=false;U.setTimeout(LTEvent.getCallback(r,function(){var r=this;if(r.isDragging){r.enableDrag=true;}}),30);n(r.container).left=r.draggingPoint[0]+a.clientX+y[26];n(r.container).top=r.draggingPoint[1]+a.clientY+y[26];};},onTitleMouseUp:function(Z){var r=this;LTEvent.removeListener(r.tmml);LTEvent.removeListener(r.tmul);LTFunction.setCursorStyle(r.topDiv,y[18],y[17]);r.enableDrag=false;r.isDragging=false;},onResizeMouseDown:function(T){var r=this;LTEvent.cancelBubble(T);r.rmml=LTEvent.bind(l,y[13],r,r.onResizeMouseMove);r.rmul=LTEvent.bind(l,y[38],r,r.onResizeMouseUp);r.draggingPoint=[r.size[0]-T.clientX,r.size[1]-T.clientY];r.enableResize=true;r.isResizing=true;},onResizeMouseMove:function(e){var r=this;LTEvent.cancelBubble(e);if(r.enableResize&&r.isResizing){r.enableResize=false;U.setTimeout(LTEvent.getCallback(r,function(){var r=this;if(r.isResizing){r.enableResize=true;}}),30);r.setContainerSize([r.draggingPoint[0]+e.clientX,r.draggingPoint[1]+e.clientY],true);};},onResizeMouseUp:function(Q){var r=this;LTEvent.removeListener(r.rmml);LTEvent.removeListener(r.rmul);r.setContainerSize([r.draggingPoint[0]+Q.clientX,r.draggingPoint[1]+Q.clientY]);r.enableResize=false;r.isResizing=false;}});function P(W){var r=this;LTFunction.inherit(r,LTBaseControl);r.city=W;var J=l.createElement(y[47]);var g=n(J);LTEvent.addListener(J,y[32],LTEvent.cancelBubble);LTEvent.addListener(J,y[38],LTEvent.cancelBubble);LTEvent.addListener(J,y[20],LTEvent.cancelBubble);g.position=y[46];g.color=y[24];g.padding=y[50];g.height="20px";g.paddingRight=y[28];g.paddingLeft=y[28];g.right="185px";g.top=y[50];g.backgroundColor=y[12];r.div=J;var s=l.createElement(y[14]);var g=n(s);s.href=G("BN-_@?5KDNMXE+w");LTEvent.bind(s,y[52],r,r.onCitySpanClick);g.paddingLeft=y[11];g.paddingRight=y[11];g.color=y[10];g.fonSize=y[25];s.innerHTML=(r.city&&r.city.length>0)?r.city:G("bQZRbPZ/bBcBbAg6bCJ*");r.citySpan=s;var M=l.createElement(y[27]);var g=n(M);g.fontSize=y[9];M.appendChild(l.createTextNode(G("bAZP")));M.appendChild(s);M.appendChild(l.createTextNode(y[8]));J.appendChild(M);var d=l.createElement(y[7]);d.size=10;var g=n(d);g.fontSize=y[9];g.border=y[6];r.input=d;LTEvent.addListener(d,"selectstart",LTEvent.returnTrue);LTEvent.addListener(d,y[32],LTEvent.returnTrue);LTEvent.addListener(d,y[52],LTEvent.returnTrue);LTEvent.bind(d,"keydown",r,function(e){var r=this;if(e.keyCode==13){LTEvent.cancelBubble(e);r.search();}});J.appendChild(d);J.appendChild(l.createTextNode(y[5]));var E=l.createElement(y[7]);E.type="button";E.value=y[8];var g=n(E);g.fontSize=y[25];g.backgroundColor=y[24];g.border=y[6];LTEvent.bind(E,y[52],r,r.search);J.appendChild(E);r.searchObj=new LTLocalSearch(LTEvent.getCallback(r,r.onSearchResult));r.searchObj.mode=1;r.searchObj.pagecap=10;if(r.city){r.searchObj.setCity(r.city);};r.overlays=[];};x(P.prototype,{initialize:function(o){var r=this;r.map=o;o._ezmarkersearch=r;r.loaded=true;},depose:function(){var r=this;r.map._ezmarkersearch=null;r.loaded=false;},getObject:function(){var r=this;return r.div;},onCitySpanClick:function(){var r=this;LTEvent.returnTrue();var M=r.map._ezmarkerplacelist;if(M){alert(G('c2g`c@*Bc3g/b@g[b3cObAg6bCJ*b@J?c2.Pc@*1bPVQbAg6bCJ*ddZ)'));if(n(M.table).display==y[48]){M.show();};};},search:function(){var r=this;if(!r.city){alert(G("bBgbb3J5c3>`ddZ4bS2IbQZ1bPZ/bBcBbAg6bCJ*"));return;};if(r.input.value==y[49]){alert(G("bBgbb3J5c3>`ddZ4c2g`c3c;b@>Mb@>[cA:Vc2g5"));return;};r.searchObj.search(r.input.value);},onSearchResult:function(Z){var r=this;var L,T=[],J=r.map;while(L=r.overlays.pop()){J.removeOverLay(L);};if(Z.searchPoints.length>0){var X=[[G('bQ*Dbd:JbdV;bQcD')],[]];var N=r.map._ezmarkerplacelist;if(N){N.setPlace(N.placeList.searchPlace(r.searchObj.city,1)[0]);N.clearRows();};for(var e=0;e<Z.count;e++){var Q=Z.searchPoints[e];var p=new LTPoint(Q.point[0],Q.point[1]);var c=new LTIcon(U._LT_ezm_iconImg+Q.id+".gif",[23,21],[12,21]);var E=new LTMarker(p,c);LTEvent.bind(E,y[52],r,r.onMarkerClick(E));var M=new LTMapText(E);M.setLabel(Q.name);M.setNoWrap(true);J.addOverLay(E);J.addOverLay(M);r.overlays.push(E);T.push(p);if(N){var Y=l.createElement(y[14]);Y.innerHTML=Q.name;Y.href=y[4];n(Y).color=y[10];LTEvent.bind(Y,y[52],r,r.onMarkerClick(E));N.addRow(Y);};};J.getBestMap(T);}else{alert(G('bQFHbdV;bQcD'));};},onMarkerClick:function(O){return function(E){var r=this;LTEvent.trigger(r,y[33],[O]);};},setCity:function(a){var r=this;if(a&&a.length>0){r.city=a;r.citySpan.innerHTML=a;r.searchObj.setCity(a);};}});function w(V){var r=this;r.placeList=V?V:LTPlaceList.getDefault();LTFunction.inherit(r,LTBaseControl);r.imgPath=U._LT_ezm_imgPath;var d=l.createElement(y[47]);var z=n(d);LTEvent.addListener(d,y[32],LTEvent.cancelBubble);LTEvent.addListener(d,y[20],LTEvent.cancelBubble);z.position=y[46];z.padding=y[50];z.width="180px";z.right=y[50];z.top=y[50];r.div=d;var c=l.createElement(y[47]);var z=n(c);z.backgroundColor=y[12];z.color=y[24];z.width=y[3];z.fontSize=y[25];z.padding=y[42];z.paddingRight=y[9];c.align=y[41];d.appendChild(c);r.head=c;var j=l.createElement(y[44]);var z=n(j);z.position=y[46];z.width=y[25];z.height=y[25];z.right=y[22];z.top=y[22];j.src=r.imgPath+y[2];LTEvent.bind(j,y[52],r,r.show);LTFunction.setCursorStyle(j,y[51]);d.appendChild(j);r.hideButton=j;var W=l.createElement("table");W.cellPadding=y[1];W.cellSpacing=y[1];W.border=y[1];W.width=y[3];var z=n(W);z.backgroundColor=y[24];z.fontSize=y[25];r.setOpacity(0.8);r.table=W;r.setPlace(r.placeList.getRootPlace());d.appendChild(W);};x(w.prototype,{initialize:function(t){var r=this;r.map=t;t._ezmarkerplacelist=r;r.loaded=true;},depose:function(){var r=this;r.map._ezmarkerplacelist=null;r.loaded=false;},getObject:function(){var r=this;return r.div;},getDataByName:function(I,b){j=j?j:U._LT_ezm_placeList;var M=encodeURI(I);if(j[0][0]==M){return j;};for(var N=0;N<j[1].length;N++){var R=w.getDataByName(I,j[1][N]);if(R){return R};};return null;},setPlace:function(a){var r=this;var z=12;var parent=a.getParent();while(parent){z-=2;parent=parent.getParent();};if(a.getParent()){r.head.innerHTML=y[49];parent=a;var h=z;while(parent){h+=2;r.head.insertBefore(l.createTextNode("->"),r.head.firstChild);r.head.insertBefore(r.getLinkSpan(parent,h,true),r.head.firstChild);parent=parent.getParent();};}else{r.head.innerHTML=G("bCgSc@*GbBcBb3_5");};r.clearRows();var T=r.table;var x=a.getChildren();for(var C=0;C<x.length;C++){var E=r.addRow(r.getLinkSpan(x[C],z-2));var V=x[C].getChildren();for(var Q=0;Q<V.length;Q++){if(Q!=0){E.appendChild(l.createTextNode(y[5]));};E.appendChild(r.getLinkSpan(V[Q],z-4));};};},clearRows:function(){var r=this;var c=r.table;while(c.rows.length>0){r.table.deleteRow(0);};},addRow:function(q){var r=this;var o=r.table;var H=o.insertRow(o.rows.length);var K=H.insertCell(H.cells.length);K.align=y[41];n(K).padding=y[42];K.appendChild(q);var H=o.insertRow(o.rows.length);return H.insertCell(H.cells.length);},getLinkSpan:function(Q,H,f){var r=this;var c=l.createElement(y[14]);c.innerHTML=Q.getName();if(Q.getPoint()){c.href=y[4];n(c).color=f?"white":y[10];LTEvent.bind(c,y[52],r,r.onLinkClick(Q,H));};return c;},onLinkClick:function(j,L){return function(){var r=this;if(j.getPoint()){r.map.centerAndZoom(j.getPoint(),L);};var R=r.map._ezmarkersearch;if(R){var E=j.canLocalSearch();if(E==y[0]){R.setCity(j.getName());};if(E=="parent"){var parent=j.getParent();while(parent){if(parent.canLocalSearch()==y[0]){R.setCity(parent.getName());break;};parent=parent.getParent();};R.setCity(j.getName());}else if(E=="child"){R.setCity(r.placeList.search(function(j){return j.canLocalSearch()==y[0];},1,j)[0].getName());};};if(j.getChildren().length>0){r.setPlace(j);};};},show:function(){var r=this;if(n(r.table).display==y[48]){n(r.table).display=y[49];r.hideButton.src=r.imgPath+y[2];}else{n(r.table).display=y[48];r.hideButton.src=r.imgPath+"down.gif";};}});x(U,{LTEZMarker:_,LTEZMarkerWin:m,LTEZMarkerSearch:P,LTEZMarkerPlaceList:w})};LTNS();
